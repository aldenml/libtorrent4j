name: Windows

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

jobs:
  x86:

    runs-on: windows-latest

    defaults:
      run:
        shell: bash

    steps:
      - uses: actions/checkout@v2

      - name: Boost download and bootstrap
        run: |
          git clone --depth=1 --branch=boost-1.73.0 https://github.com/boostorg/boost.git
          cd boost
          git submodule update --depth=1 --init --recursive
          ./bootstrap.sh
          ./b2 headers
          cd ..
          export BOOST_ROOT=$PWD/boost

      - name: OpenSSL download
        run: |
          wget -nv -O openssl.tar.gz https://www.openssl.org/source/openssl-1.1.1g.tar.gz
          tar xzf openssl.tar.gz
          export OPENSSL_SOURCE=$PWD/openssl-1.1.1g
